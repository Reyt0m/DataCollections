(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1055],{493:(e,t,r)=>{Promise.resolve().then(r.bind(r,45626)),Promise.resolve().then(r.bind(r,48882)),Promise.resolve().then(r.bind(r,78830)),Promise.resolve().then(r.bind(r,48091)),Promise.resolve().then(r.t.bind(r,92591,23)),Promise.resolve().then(r.t.bind(r,13895,23)),Promise.resolve().then(r.t.bind(r,97111,23)),Promise.resolve().then(r.bind(r,32911)),Promise.resolve().then(r.t.bind(r,65061,23)),Promise.resolve().then(r.bind(r,80208)),Promise.resolve().then(r.bind(r,59306)),Promise.resolve().then(r.bind(r,2704)),Promise.resolve().then(r.t.bind(r,24729,23)),Promise.resolve().then(r.t.bind(r,63143,23)),Promise.resolve().then(r.t.bind(r,62817,23)),Promise.resolve().then(r.bind(r,82270)),Promise.resolve().then(r.bind(r,58123)),Promise.resolve().then(r.bind(r,79050))},2704:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var i=r(95155),n=r(12115),o=r(52596);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,[r,i]=(0,n.useState)({direction:"none",scrollY:0,lastScrollY:0,isScrolling:!1});return(0,n.useEffect)(()=>{let n=null,o=window.scrollY,l=()=>{let l=window.scrollY,a=l>o+e?"down":l<o-e?"up":"none";("none"!==a||!1===r.isScrolling)&&i(e=>({direction:"none"!==a?a:e.direction,scrollY:l,lastScrollY:o,isScrolling:!0})),o=l>0?l:0,n&&clearTimeout(n),n=setTimeout(()=>{i(e=>({...e,isScrolling:!1}))},t)},a=()=>{window.requestAnimationFrame(l)};return window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a),n&&clearTimeout(n)}},[e,t,r.isScrolling]),r};var a=r(70080),s=r.n(a);let c=e=>{let{children:t,className:r,threshold:a=.1,timeoutDelay:c=150,position:u="top"}=e,{direction:d,isScrolling:g,scrollY:h}=l(a,c),[m,v]=(0,n.useState)(!0),b=(0,n.useRef)("none");return(0,n.useEffect)(()=>{if("top"===u&&h<120)return void v(!0);g&&"none"!==d&&(b.current=d),"down"!==d&&(g||"down"!==b.current)?"up"!==d&&(g||"up"!==b.current)||v(!0):v(!1)},[d,g,u,h]),(0,i.jsx)("div",{className:(0,o.A)(s().ScrollDirectionVisibility,s()[u],{[s().visible]:m,[s().hidden]:!m},r),children:t})}},13786:(e,t,r)=>{"use strict";async function i(e,t){return fetch(e,t)}r.d(t,{K:()=>i})},38288:(e,t,r)=>{"use strict";r.d(t,{U:()=>u,a:()=>h});var i=r(95155),n=r(12115),o=r(27043),l=r(45789),a=r(13786),s=r(80464),c=r(74919);let u=(0,n.createContext)({}),d="/api/next",g={aggregation:"".concat(d,"/investments/aggregations"),aggregationCompanies:"".concat(d,"/investments/aggregation_companies")},h=e=>{let{children:t}=e,[r,d]=(0,n.useState)("daily"),[h,m]=(0,n.useState)({}),[v,b]=(0,n.useState)([]),[f,p]=(0,n.useState)(0),{isUserEnterprise:y,isUserForStartups:w}=(0,n.useContext)(c.R),S=(0,o.useTranslations)("Commons"),_=(0,n.useCallback)(async()=>{let e=new URLSearchParams({type:r});try{let t=await (0,a.K)("".concat(g.aggregation,"?").concat(e.toString()),{method:"GET",cache:"no-store"});if(!t.ok)return void(0,l.vV)({url:"".concat(g.aggregation,"?").concat(e.toString()),status:t.status,statusText:t.statusText,error:"Failed to fetch aggregation data",label:{function:"fetchAggregationData",caller:"providers/TopFirstViewProvider/index.ts"}});let r=await t.json();m(r)}catch(t){(0,l.vV)({url:"".concat(g.aggregation,"?").concat(e.toString()),error:t,label:{function:"fetchAggregationData",caller:"providers/TopFirstViewProvider/index.ts"}})}},[r]),P=(0,n.useCallback)(()=>null==h||!h.labels||0===h.labels.length||f===h.labels.length-1,[h,f]),V=(0,n.useCallback)(async()=>{var e;if(!(P()||y||w))return;let t=null==(e=h.periods)?void 0:e[f];if(!r||!t)return;let i=new URLSearchParams({type:r,period:t});try{let e=await (0,a.K)("".concat(g.aggregationCompanies,"?").concat(i.toString()),{method:"GET",cache:"no-store"});if(!e.ok)return void(0,l.vV)({url:"".concat(g.aggregationCompanies,"?").concat(i.toString()),status:e.status,statusText:e.statusText,error:"Failed to fetch aggregation companies data",label:{function:"fetchCompanies",caller:"providers/TopFirstViewProvider/index.ts"}});let t=await e.json();b(t)}catch(e){(0,l.vV)({url:"".concat(g.aggregationCompanies,"?").concat(i.toString()),error:e,label:{function:"fetchCompanies",caller:"providers/TopFirstViewProvider/index.ts"}})}},[f]),C=(0,n.useCallback)((e,t)=>{if(!t)return"";switch(e){case"daily":case"monthly":return(0,s.LH)(S,t);case"weekly":return t.split(" - ").map(e=>(0,s.LH)(S,e)).join(" - ")}},[S]),x=(0,n.useCallback)(()=>{f>0&&p(e=>e-1)},[f]),D=(0,n.useCallback)(()=>{var e;f>=(null==h||null==(e=h.labels)?void 0:e.length)-1||p(e=>e+1)},[h,f]);return(0,i.jsx)(u.Provider,{value:{graphData:h,graphType:r,setGraphType:d,selectedGraphDataIndex:f,setSelectedGraphDataIndex:p,companies:v,isLastPeriod:P,fetchAggregationData:_,setPrevSelectedGraphDataIndex:x,setNextSelectedGraphDataIndex:D,fetchCompanies:V,formattedTargetDateString:C},children:t})}},45789:(e,t,r)=>{"use strict";r.d(t,{vV:()=>i});let i=e=>{let{url:t,status:r,statusText:i,error:n,label:o}=e;console.error(JSON.stringify({message:r&&i&&t?"Fetch Error \xd7 ".concat(r," ").concat(i," ").concat(t):"Fetch Error \xd7 Network Error",...t&&{url:t},...r&&{status:r},...i&&{statusText:i},statusText:i,error:n,label:o},null,2))}},48091:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var i=r(95155),n=r(65033),o=r(38288),l=r(74919);let a=e=>{let{children:t}=e;return(0,i.jsx)(n.Z,{children:(0,i.jsx)(l.v,{children:(0,i.jsx)(o.a,{children:t})})})}},70080:e=>{e.exports={errorMessage:"ScrollDirectionVisibility_errorMessage__D9WwU",ScrollDirectionVisibility:"ScrollDirectionVisibility_ScrollDirectionVisibility__bhqgn",top:"ScrollDirectionVisibility_top__bCbft",bottom:"ScrollDirectionVisibility_bottom__ok_kv",visible:"ScrollDirectionVisibility_visible__3p4rY",hidden:"ScrollDirectionVisibility_hidden__kjFVQ","fade-in":"ScrollDirectionVisibility_fade-in__7BpEB","fade-out":"ScrollDirectionVisibility_fade-out__szwnj"}},80464:(e,t,r)=>{"use strict";r.d(t,{Cb:()=>a,LH:()=>o,Rz:()=>n,aE:()=>l,fQ:()=>s});let i={fractionDigits:0,locale:"ja-JP"},n=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||Number.isNaN(e))return"";let n={...i,...r};return(t=n.fractionDigits,e>0?Math.floor(e*Math.pow(10,t))/Math.pow(10,t):Math.ceil(e*Math.pow(10,t))/Math.pow(10,t)).toLocaleString(n.locale,{minimumFractionDigits:0,maximumFractionDigits:n.fractionDigits})},o=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";try{if(null==t)return r;let i=(t.includes("T")?t.split("T")[0]:t).split("-");if(1===i.length)return e("dateFormat.year",{yyyy:i[0]});if(2===i.length)return e("dateFormat.short",{yyyy:i[0],mm:i[1]});if(3===i.length)if("00"===i[1]&&"00"===i[2])return e("dateFormat.year",{yyyy:i[0]});else if("00"===i[2])return e("dateFormat.short",{yyyy:i[0],mm:i[1]});else return e("dateFormat.full",{yyyy:i[0],mm:i[1],dd:i[2]});else throw Error("dateString format error: '".concat(t||"null","'"))}catch(e){return console.warn(e,"'".concat(t||"null","' can not translate")),r}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";try{let r;if(void 0===e||""===e||Number.isNaN(e))return"";if("string"==typeof e){let i=RegExp("\\".concat(t),"g");if(r=parseFloat(e.replace(i,"")),Number.isNaN(r))throw Error()}else r="number"==typeof e?e:0;return r>0?"+".concat(e):e.toString()}catch(t){return console.warn(t,"'".concat(e||"","' can not convert to float")),""}},a=e=>e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),s=e=>{let t=e.replace(/\s/g,"");return/^0\d+/.test(t)?"1":t}}},e=>{var t=t=>e(e.s=t);e.O(0,[6795,9140,1163,2533,7089,8646,8565,7812,6221,8441,1684,7358],()=>t(493)),_N_E=e.O()}]);